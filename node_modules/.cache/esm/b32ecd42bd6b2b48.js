"main";_bd6‍.x([["CoursesAPI",()=>CoursesAPI]]);let RESTDataSource;_bd6‍.w("apollo-datasource-rest",[["RESTDataSource",["RESTDataSource"],function(v){RESTDataSource=v}]]);yield;

const axios = require('axios')

       class CoursesAPI extends RESTDataSource {
    constructor() {
        super();
        this.baseURL = 'http://localhost:8000/';
    }

    async getAllCourses() {
        const result = await this.get('courses-ms/resources/courses/');
        return result["results"];
    }

    async getACourse(idNumber) {
        const result = await this.get('transaction/'+idNumber);

        return result;
    }

    async createACourse(args) {
        args.baseURL = this.baseURL
        return new Promise(function(resolve,reject) {
            axios.post(args.baseURL+'transaction', {
                type_transation_id: args.type_transation_id,
                total_amount: args.total_amount,
                observation: args.observation,
                balance: args.balance,
                contact_name: args.contact_name,
                transactiondetails: [{
                    quantity: args.quantity,
                    subtotal: args.subtotal
                }]

            })
            .then((res) => {
                resolve("Created");
            })
            .catch((error) => {
                _bd6‍.g.console.error(error)
            })
        })
    }

    async editACourse(args) {
        var object = await this.getATransaction(args.id)

        args.baseURL = this.baseURL
        return new Promise(function(resolve,reject) {
            axios.put(args.baseURL+'transaction/'+args.id, {
                type_transation_id: (args.hasOwnProperty("type_transation_id") ?args.type_transation_id:object.type_transation_id),
                total_amount: (args.hasOwnProperty("total_amount") ?args.total_amount:object.total_amount),
                observation: (args.hasOwnProperty("observation") ?args.observation:object.observation),
                balance: (args.hasOwnProperty("balance") ?args.balance:object.balance),
                contact_name: (args.hasOwnProperty("contact_name") ?args.contact_name:object.contact_name),
            })
            .then((res) => {
                resolve(res.data);
            })
            .catch((error) => {
                _bd6‍.g.console.error(error)
            })
        })
    }

    async deleteATransaction(idNumber) {
        this.delete('transaction/'+idNumber)
        return "Deleted successfully"
    }
};
